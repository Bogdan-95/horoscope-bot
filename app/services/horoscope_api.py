"""
–°–µ—Ä–≤–∏—Å API –≥–æ—Ä–æ—Å–∫–æ–ø–æ–≤
======================
–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø –∫ API –≥–æ—Ä–æ—Å–∫–æ–ø–æ–≤ —Å –º–µ—Ö–∞–Ω–∏–∑–º–∞–º–∏ —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏—è.
–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–µ—Ä–µ–≤–æ–¥, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ API.
"""

import aiohttp
import os
import random
from typing import Optional, Dict
from app.services.translator_service import SimpleTranslator
from app.utils.logger import logger


class HoroscopeAPI:
    """
    –°–µ—Ä–≤–∏—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –≥–æ—Ä–æ—Å–∫–æ–ø–æ–≤ –∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö API.

    –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
    - –û—Å–Ω–æ–≤–Ω–æ–π API (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π, –±–µ–∑ –∫–ª—é—á–∞)
    - –†–µ–∑–µ—Ä–≤–Ω—ã–π API (—Å API –∫–ª—é—á–æ–º)
    - –õ–æ–∫–∞–ª—å–Ω—ã–π —Ä–µ–∑–µ—Ä–≤ —Å —Å–ª—É—á–∞–π–Ω—ã–º–∏ —Ñ—Ä–∞–∑–∞–º–∏
    - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥ —Å –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ –Ω–∞ —Ä—É—Å—Å–∫–∏–π
    - –ü–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
    """

    # –û—Å–Ω–æ–≤–Ω–æ–π API - –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
    PRIMARY_API_URL = "https://ohmanda.com/api/horoscope"

    # –†–µ–∑–µ—Ä–≤–Ω—ã–π API - —Ç—Ä–µ–±—É–µ—Ç API –∫–ª—é—á, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    BACKUP_API_URL = "https://horoscope-app-api.vercel.app/api/v1/get-horoscope/daily"


    def __init__(self):
        """
        –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞ HoroscopeAPI.

        –ó–∞–≥—Ä—É–∂–∞–µ—Ç API –∫–ª—é—á –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç –º–∞–ø–ø–∏–Ω–≥ –∑–Ω–∞–∫–æ–≤ –∑–æ–¥–∏–∞–∫–∞.
        API –∫–ª—é—á –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ API –ø—Ä–∏ —Å–±–æ–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ.
        """
        self.api_key = os.getenv("ASTROLOGY_API_KEY")  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ API
        self.translator = SimpleTranslator()

        # –ú–∞–ø–ø–∏–Ω–≥ —Ä—É—Å—Å–∫–∏—Ö –Ω–∞–∑–≤–∞–Ω–∏–π –∑–Ω–∞–∫–æ–≤ –∑–æ–¥–∏–∞–∫–∞ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ (–¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API)
        self.signs: Dict[str, str] = {
            "–æ–≤–µ–Ω": "aries",
            "—Ç–µ–ª–µ—Ü": "taurus",
            "–±–ª–∏–∑–Ω–µ—Ü—ã": "gemini",
            "—Ä–∞–∫": "cancer",
            "–ª–µ–≤": "leo",
            "–¥–µ–≤–∞": "virgo",
            "–≤–µ—Å—ã": "libra",
            "—Å–∫–æ—Ä–ø–∏–æ–Ω": "scorpio",
            "—Å—Ç—Ä–µ–ª–µ—Ü": "sagittarius",
            "–∫–æ–∑–µ—Ä–æ–≥": "capricorn",
            "–≤–æ–¥–æ–ª–µ–π": "aquarius",
            "—Ä—ã–±—ã": "pisces",
        }

        # –ê–Ω–≥–ª–∏–π—Å–∫–∏–µ –∑–Ω–∞–∫–∏ —Å –∑–∞–≥–ª–∞–≤–Ω–æ–π –ø–µ—Ä–≤–æ–π –±—É–∫–≤–æ–π (–¥–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ API)
        self.signs_capitalized: Dict[str, str] = {
            "–æ–≤–µ–Ω": "Aries",
            "—Ç–µ–ª–µ—Ü": "Taurus",
            "–±–ª–∏–∑–Ω–µ—Ü—ã": "Gemini",
            "—Ä–∞–∫": "Cancer",
            "–ª–µ–≤": "Leo",
            "–¥–µ–≤–∞": "Virgo",
            "–≤–µ—Å—ã": "Libra",
            "—Å–∫–æ—Ä–ø–∏–æ–Ω": "Scorpio",
            "—Å—Ç—Ä–µ–ª–µ—Ü": "Sagittarius",
            "–∫–æ–∑–µ—Ä–æ–≥": "Capricorn",
            "–≤–æ–¥–æ–ª–µ–π": "Aquarius",
            "—Ä—ã–±—ã": "Pisces",
        }

        # –õ–æ–∫–∞–ª—å–Ω—ã–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ —Ñ—Ä–∞–∑—ã –ø—Ä–∏ —Å–±–æ–µ –≤—Å–µ—Ö API
        self.fallback_phrases: list = [
            "–°–µ–≥–æ–¥–Ω—è –∑–≤–µ–∑–¥—ã –±–ª–∞–≥–æ–≤–æ–ª—è—Ç –∫ –Ω–æ–≤—ã–º –Ω–∞—á–∏–Ω–∞–Ω–∏—è–º.",
            "–î–µ–Ω—å –∏–¥–µ–∞–ª–µ–Ω –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –±—É–¥—É—â–µ–≥–æ.",
            "–°–ª—É—à–∞–π—Ç–µ —Å–≤–æ—é –∏–Ω—Ç—É–∏—Ü–∏—é - –æ–Ω–∞ –Ω–µ –ø–æ–¥–≤–µ–¥–µ—Ç.",
            "–ù–µ –±–æ–π—Ç–µ—Å—å –¥–µ–ª–∞—Ç—å –ø–µ—Ä–≤—ã–π —à–∞–≥ –≤ –≤–∞–∂–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–∞—Ö.",
            "–°–µ–≥–æ–¥–Ω—è—à–Ω–∏–π –¥–µ–Ω—å –ø—Ä–∏–Ω–µ—Å–µ—Ç –ø—Ä–∏—è—Ç–Ω—ã–µ —Å—é—Ä–ø—Ä–∏–∑—ã.",
            "–•–æ—Ä–æ—à–µ–µ –≤—Ä–µ–º—è –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å—Ç–∞—Ä—ã—Ö –¥–µ–ª.",
            "–ó–≤–µ–∑–¥—ã —Å–æ–≤–µ—Ç—É—é—Ç –ø—Ä–æ—è–≤–∏—Ç—å —Ç–µ—Ä–ø–µ–Ω–∏–µ –≤ –æ–±—â–µ–Ω–∏–∏.",
            "–°–µ–≥–æ–¥–Ω—è –≤—ã –æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è –æ–∫—Ä—É–∂–∞—é—â–∏—Ö.",
            "–£–¥–µ–ª–∏—Ç–µ –≤—Ä–µ–º—è —Å–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏—é –∏ –æ–±—É—á–µ–Ω–∏—é.",
            "–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã —Ç—Ä–µ–±—É—é—Ç –æ—Å–æ–±–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è.",
        ]

    async def get_daily_horoscope(self, sign_ru: str) -> str:
        """
        –ü–æ–ª—É—á–∏—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –≥–æ—Ä–æ—Å–∫–æ–ø –¥–ª—è –∑–Ω–∞–∫–∞ –∑–æ–¥–∏–∞–∫–∞.

        –ú–µ—Ç–æ–¥ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏—è:
        1. –ü—Ä–æ–±—É–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π API
        2. –ü—Ä–æ–±—É–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—ã–π API (–µ—Å–ª–∏ –µ—Å—Ç—å API –∫–ª—é—á)
        3. –ò—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–µ —Å–ª—É—á–∞–π–Ω—ã–µ —Ñ—Ä–∞–∑—ã

        Args:
            sign_ru (str): –ó–Ω–∞–∫ –∑–æ–¥–∏–∞–∫–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–∫–æ–∑–µ—Ä–æ–≥")

        Returns:
            str: –û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –≥–æ—Ä–æ—Å–∫–æ–ø–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –∑–Ω–∞–∫–∞
        """
        logger.info(f"[API] –ó–∞–ø—Ä–æ—Å –≥–æ—Ä–æ—Å–∫–æ–ø–∞ | –∑–Ω–∞–∫={sign_ru}")

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –≤—Ö–æ–¥–Ω–æ–≥–æ –∑–Ω–∞–∫–∞
        if sign_ru.lower() not in self.signs:
            logger.warning(f"[API] –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –∑–Ω–∞–∫: {sign_ru}")
            return "‚ùå –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –∑–Ω–∞–∫ –∑–æ–¥–∏–∞–∫–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –∑–Ω–∞–∫ –∏–∑ —Å–ø–∏—Å–∫–∞."

        # –£—Ä–æ–≤–µ–Ω—å 1: –ü—Ä–æ–±—É–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π API (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π, –±–µ–∑ –∫–ª—é—á–∞)
        horoscope = await self._try_primary_api(sign_ru)

        # –£—Ä–æ–≤–µ–Ω—å 2: –ü—Ä–æ–±—É–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—ã–π API (—Ç—Ä–µ–±—É–µ—Ç –∫–ª—é—á)
        if not horoscope and self.api_key:
            horoscope = await self._try_backup_api(sign_ru)

        # –£—Ä–æ–≤–µ–Ω—å 3: –†–µ–∑–µ—Ä–≤ —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ —Ñ—Ä–∞–∑–∞–º–∏
        if not horoscope:
            horoscope = self._get_fallback_horoscope(sign_ru)
            logger.info("[API] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–∑–µ—Ä–≤–Ω—ã–π –≥–æ—Ä–æ—Å–∫–æ–ø")

        return horoscope

    async def _try_primary_api(self, sign_ru: str) -> Optional[str]:
        """
        –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–ª—É—á–∏—Ç—å –≥–æ—Ä–æ—Å–∫–æ–ø –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ API.

        Args:
            sign_ru (str): –ó–Ω–∞–∫ –∑–æ–¥–∏–∞–∫–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º

        Returns:
            Optional[str]: –¢–µ–∫—Å—Ç –≥–æ—Ä–æ—Å–∫–æ–ø–∞ –∏–ª–∏ None –ø—Ä–∏ –Ω–µ—É–¥–∞—á–µ
        """
        try:
            sign_en = self.signs.get(sign_ru.lower())
            if not sign_en:
                return None

            async with aiohttp.ClientSession() as session:
                # –≠–Ω–¥–ø–æ–∏–Ω—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ API
                url = f"{self.PRIMARY_API_URL}/{sign_en}/"

                async with session.get(url, timeout=10) as response:
                    if response.status == 200:
                        data = await response.json()
                        raw_text = data.get("horoscope", "")

                        if raw_text:
                            logger.debug(f"[API] –û—Å–Ω–æ–≤–Ω–æ–π API —É—Å–ø–µ—à–µ–Ω: {sign_ru}")
                            # –ü–µ—Ä–µ–≤–æ–¥–∏–º —Å –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ –Ω–∞ —Ä—É—Å—Å–∫–∏–π
                            translated = await self.translator.translate_text(raw_text)
                            return self._format_horoscope(sign_ru, translated)

        except aiohttp.ClientError as e:
            logger.error(f"[API] –°–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ API: {e}")
        except Exception as e:
            logger.exception(f"[API] –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ API: {e}")

        return None

    async def _try_backup_api(self, sign_ru: str) -> Optional[str]:
        """
        –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–ª—É—á–∏—Ç—å –≥–æ—Ä–æ—Å–∫–æ–ø –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ API (—Ç—Ä–µ–±—É–µ—Ç API –∫–ª—é—á).

        –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –≠—Ç–æ—Ç API —Ç—Ä–µ–±—É–µ—Ç –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –∑–Ω–∞–∫–∏ —Å –∑–∞–≥–ª–∞–≤–Ω–æ–π –±—É–∫–≤—ã –∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏.

        Args:
            sign_ru (str): –ó–Ω–∞–∫ –∑–æ–¥–∏–∞–∫–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º

        Returns:
            Optional[str]: –¢–µ–∫—Å—Ç –≥–æ—Ä–æ—Å–∫–æ–ø–∞ –∏–ª–∏ None –ø—Ä–∏ –Ω–µ—É–¥–∞—á–µ
        """
        try:
            sign_en_capitalized = self.signs_capitalized.get(sign_ru.lower())
            if not sign_en_capitalized or not self.api_key:
                return None

            async with aiohttp.ClientSession() as session:
                params = {
                    "sign": sign_en_capitalized,
                    "day": "TODAY"
                }

                headers = {
                    "X-RapidAPI-Key": self.api_key,
                    "X-RapidAPI-Host": "horoscope-app-api.vercel.app"
                }

                async with session.get(
                        self.BACKUP_API_URL,
                        params=params,
                        headers=headers,
                        timeout=10
                ) as response:

                    if response.status == 200:
                        data = await response.json()
                        # –ò–∑–≤–ª–µ–∫–∞–µ–º –≥–æ—Ä–æ—Å–∫–æ–ø –∏–∑ –≤–ª–æ–∂–µ–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
                        raw_text = data.get("data", {}).get("horoscope_data", "")

                        if raw_text:
                            logger.debug(f"[API] –†–µ–∑–µ—Ä–≤–Ω—ã–π API —É—Å–ø–µ—à–µ–Ω: {sign_ru}")
                            return self._format_horoscope(sign_ru, raw_text)
                    else:
                        error_data = await response.json()
                        logger.error(f"[API] –û—à–∏–±–∫–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ API: {error_data}")

        except aiohttp.ClientError as e:
            logger.error(f"[API] –°–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ API: {e}")
        except Exception as e:
            logger.exception(f"[API] –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ API: {e}")

        return None

    def _get_fallback_horoscope(self, sign_ru: str) -> str:
        """
        –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ä–µ–∑–µ—Ä–≤–Ω—ã–π –≥–æ—Ä–æ—Å–∫–æ–ø –∏–∑ –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ñ—Ä–∞–∑.

        –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ —Å–±–æ–µ –≤—Å–µ—Ö API. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—É—é —Ñ—Ä–∞–∑—É –∏–∑ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞.

        Args:
            sign_ru (str): –ó–Ω–∞–∫ –∑–æ–¥–∏–∞–∫–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º

        Returns:
            str: –û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∑–µ—Ä–≤–Ω—ã–π –≥–æ—Ä–æ—Å–∫–æ–ø
        """
        phrase = random.choice(self.fallback_phrases)
        return self._format_horoscope(sign_ru, phrase)

    def _format_horoscope(self, sign_ru: str, text: str) -> str:
        """
        –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç –≥–æ—Ä–æ—Å–∫–æ–ø–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Å—Ç–∏–ª–µ–º.

        –î–æ–±–∞–≤–ª—è–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ –∑–Ω–∞–∫–∞ –∑–æ–¥–∏–∞–∫–∞ –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç Markdown —Ä–∞–∑–º–µ—Ç–∫—É –¥–ª—è Telegram.

        Args:
            sign_ru (str): –ó–Ω–∞–∫ –∑–æ–¥–∏–∞–∫–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º
            text (str): –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ç–µ–∫—Å—Ç–∞ –≥–æ—Ä–æ—Å–∫–æ–ø–∞

        Returns:
            str: –û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≥–æ—Ä–æ—Å–∫–æ–ø, –≥–æ—Ç–æ–≤—ã–π –¥–ª—è Telegram
        """
        # –ü—Ä–∏–≤–æ–¥–∏–º –Ω–∞–∑–≤–∞–Ω–∏–µ –∑–Ω–∞–∫–∞ –∫ –≤–∏–¥—É —Å –∑–∞–≥–ª–∞–≤–Ω–æ–π –±—É–∫–≤—ã
        sign_formatted = sign_ru.capitalize()

        # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Å Markdown –¥–ª—è Telegram
        return f"üîÆ *{sign_formatted}*\n\n{text}"
